{
  "launchType": "FARGATE",
  "deploymentController": {
    "type": "ECS"
  },
  "networkConfiguration": {
    "awsvpcConfiguration": {
      "subnets": [
        "{{ cfn_output `zenn-ecs-cdk-ecspresso` `PublicSubnet1` }}",
        "{{ cfn_output `zenn-ecs-cdk-ecspresso` `PublicSubnet2` }}"
      ],
      "securityGroups": [
        "{{ cfn_output `zenn-ecs-cdk-ecspresso` `ServiceSecurityGroupId` }}"
      ],
      "assignPublicIp": "ENABLED"
    }
  },
  "loadBalancers": [
    {
      "targetGroupArn": "{{ cfn_output `zenn-ecs-cdk-ecspresso` `TargetGroupBlueArn` }}",
      "containerName": "app",
      "containerPort": 8000,
      "advancedConfiguration": {
        "alternateTargetGroupArn": "{{ cfn_output `zenn-ecs-cdk-ecspresso` `TargetGroupGreenArn` }}",
        "productionListenerRule": "{{ cfn_output `zenn-ecs-cdk-ecspresso` `ProductionListenerRuleArn` }}",
        "testListenerRule": "{{ cfn_output `zenn-ecs-cdk-ecspresso` `TestListenerRuleArn` }}",
        "roleArn": "{{ cfn_output `zenn-ecs-cdk-ecspresso` `EcsBlueGreenDeployRoleArn` }}"
      }
    }
  ],
  "deploymentConfiguration": {
    "strategy": "BLUE_GREEN"
  },
  "desiredCount": 1
}
